//
// Generated by NVIDIA NVVM Compiler
// Compiler built on Thu Apr  5 15:30:35 2012 (1333611035)
// Cuda compilation tools, release 4.2, V0.2.1221
//

.version 3.0
.target sm_20
.address_size 64

	.file	1 "backprop_cuda.cpp3.i"
	.file	2 "./backprop_cuda_kernel.cu"
	.file	3 "/home/bachelor/deicide218/cuda-4.2/nvvm/ci_include.h"
	.file	4 "/home/bachelor/deicide218/cuda-4.2/include/device_functions.h"
// __cuda_local_var_17594_34_non_const_input_node has been demoted
// __cuda_local_var_17595_34_non_const_weight_matrix has been demoted

.entry _Z22bpnn_layerforward_CUDAPfS_S_S_ii(
	.param .u64 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_0,
	.param .u64 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_1,
	.param .u64 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_2,
	.param .u64 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_3,
	.param .u32 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_4,
	.param .u32 _Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_5
)
{
	.reg .f32 	%f<18>;
	.reg .pred 	%p<6>;
	.reg .s32 	%r<45>;
	.reg .s64 	%rl<33>;
	// demoted variable
	.shared .align 4 .b8 __cuda_local_var_17594_34_non_const_input_node[64];
	// demoted variable
	.shared .align 4 .b8 __cuda_local_var_17595_34_non_const_weight_matrix[1024];

	ld.param.u64 	%rl8, [_Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_0];
	ld.param.u64 	%rl9, [_Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_2];
	ld.param.u64 	%rl10, [_Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_3];
	ld.param.u32 	%r1, [_Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_5];
	cvta.to.global.u64 	%rl1, %rl10;
	cvta.to.global.u64 	%rl2, %rl9;
	cvta.to.global.u64 	%rl3, %rl8;
	shl.b32 	%r9, %r1, 4;
	add.s32 	%r10, %r9, 16;
	.loc 2 20 1
	mov.u32 	%r11, %ctaid.y;
	.loc 2 24 1
	add.s32 	%r12, %r1, 1;
	.loc 2 22 1
	mov.u32 	%r2, %tid.y;
	.loc 2 21 1
	mov.u32 	%r3, %tid.x;
	.loc 2 24 1
	add.s32 	%r13, %r1, %r3;
	mad.lo.s32 	%r14, %r11, %r10, %r13;
	mad.lo.s32 	%r15, %r2, %r12, %r14;
	.loc 2 24 1
	add.s32 	%r4, %r15, 2;
	shl.b32 	%r16, %r11, 4;
	.loc 2 26 1
	add.s32 	%r17, %r16, %r2;
	add.s32 	%r5, %r17, 1;
	.loc 2 32 1
	setp.eq.s32 	%p1, %r3, 0;
	.loc 2 37 1
	cvt.s64.s32 	%rl4, %r2;
	mul.wide.s32 	%rl11, %r2, 4;
	mov.u64 	%rl12, __cuda_local_var_17594_34_non_const_input_node;
	add.s64 	%rl5, %rl12, %rl11;
	.loc 2 32 1
	setp.ne.s32 	%p2, %r3, 0;
	@%p2 bra 	BB0_2;

	.loc 2 33 1
	mul.wide.s32 	%rl13, %r5, 4;
	add.s64 	%rl14, %rl3, %rl13;
	ld.global.f32 	%f3, [%rl14];
	st.shared.f32 	[%rl5], %f3;

BB0_2:
	.loc 2 35 1
	bar.sync 	0;
	.loc 2 37 1
	mul.wide.s32 	%rl15, %r4, 4;
	add.s64 	%rl16, %rl2, %rl15;
	.loc 2 21 1
	mov.u32 	%r43, %tid.x;
	.loc 2 37 1
	cvt.s64.s32 	%rl6, %r43;
	shl.b64 	%rl17, %rl4, 6;
	mov.u64 	%rl18, __cuda_local_var_17595_34_non_const_weight_matrix;
	add.s64 	%rl19, %rl18, %rl17;
	mul.wide.s32 	%rl20, %r43, 4;
	add.s64 	%rl7, %rl19, %rl20;
	.loc 2 37 1
	ld.global.f32 	%f4, [%rl16];
	st.shared.f32 	[%rl7], %f4;
	.loc 2 39 1
	bar.sync 	0;
	.loc 2 41 1
	ld.shared.f32 	%f5, [%rl5];
	ld.shared.f32 	%f6, [%rl7];
	mul.f32 	%f7, %f6, %f5;
	st.shared.f32 	[%rl7], %f7;
	.loc 2 43 1
	bar.sync 	0;
	mov.f32 	%f8, 0f41800000;
	.loc 3 547 5
	lg2.approx.f32 	%f1, %f8;
	.loc 2 45 1
	setp.ltu.f32 	%p3, %f1, 0f3F800000;
	@%p3 bra 	BB0_7;

	mov.f32 	%f9, 0f40000000;
	.loc 3 547 5
	lg2.approx.f32 	%f2, %f9;
	mov.u32 	%r44, 1;

BB0_4:
	.loc 2 47 1
	cvt.rn.f32.s32 	%f10, %r44;
	.loc 4 1303 3
	mul.f32 	%f11, %f10, %f2;
	.loc 3 531 5
	ex2.approx.f32 	%f12, %f11;
	.loc 3 1343 5
	cvt.rzi.s32.f32 	%r7, %f12;
	.loc 2 49 1
	rem.s32 	%r26, %r2, %r7;
	setp.ne.s32 	%p4, %r26, 0;
	@%p4 bra 	BB0_6;

	.loc 2 50 1
	ld.shared.f32 	%f13, [%rl7];
	shr.u32 	%r28, %r7, 31;
	add.s32 	%r29, %r7, %r28;
	shr.s32 	%r30, %r29, 1;
	add.s32 	%r31, %r30, %r2;
	mul.wide.s32 	%rl21, %r31, 64;
	add.s64 	%rl23, %rl18, %rl21;
	shl.b64 	%rl24, %rl6, 2;
	add.s64 	%rl25, %rl23, %rl24;
	.loc 2 50 1
	ld.shared.f32 	%f14, [%rl25];
	add.f32 	%f15, %f13, %f14;
	st.shared.f32 	[%rl7], %f15;

BB0_6:
	.loc 2 52 1
	bar.sync 	0;
	.loc 2 45 44
	add.s32 	%r44, %r44, 1;
	.loc 2 45 1
	cvt.rn.f32.s32 	%f16, %r44;
	setp.le.f32 	%p5, %f16, %f1;
	@%p5 bra 	BB0_4;

BB0_7:
	.loc 2 72 1
	bar.sync 	0;
	.loc 2 74 1
	@%p1 bra 	BB0_9;

	.loc 2 78 2
	ret;

BB0_9:
	shl.b64 	%rl26, %rl6, 6;
	add.s64 	%rl28, %rl18, %rl26;
	shl.b64 	%rl29, %rl4, 2;
	add.s64 	%rl30, %rl28, %rl29;
	ld.param.u32 	%r38, [_Z22bpnn_layerforward_CUDAPfS_S_S_ii_param_5];
	.loc 2 20 1
	mov.u32 	%r41, %ctaid.y;
	.loc 2 22 1
	mov.u32 	%r42, %tid.y;
	.loc 2 75 1
	mad.lo.s32 	%r35, %r41, %r38, %r42;
	mul.wide.s32 	%rl31, %r35, 4;
	add.s64 	%rl32, %rl1, %rl31;
	ld.shared.f32 	%f17, [%rl30];
	st.global.f32 	[%rl32], %f17;
	.loc 2 78 2
	ret;
}

.entry _Z24bpnn_adjust_weights_cudaPfiS_iS_S_(
	.param .u64 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_0,
	.param .u32 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_1,
	.param .u64 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_2,
	.param .u32 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_3,
	.param .u64 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_4,
	.param .u64 _Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_5
)
{
	.reg .f32 	%f<17>;
	.reg .f64 	%fd<25>;
	.reg .pred 	%p<2>;
	.reg .s32 	%r<37>;
	.reg .s64 	%rl<21>;


	ld.param.u64 	%rl5, [_Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_0];
	ld.param.u32 	%r3, [_Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_1];
	ld.param.u64 	%rl6, [_Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_2];
	ld.param.u64 	%rl7, [_Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_4];
	ld.param.u64 	%rl8, [_Z24bpnn_adjust_weights_cudaPfiS_iS_S__param_5];
	cvta.to.global.u64 	%rl1, %rl7;
	shl.b32 	%r4, %r3, 4;
	add.s32 	%r5, %r4, 16;
	.loc 2 90 1
	mov.u32 	%r1, %ctaid.y;
	.loc 2 95 1
	add.s32 	%r6, %r3, 1;
	.loc 2 93 1
	mov.u32 	%r2, %tid.y;
	.loc 2 92 1
	mov.u32 	%r7, %tid.x;
	.loc 2 95 1
	mad.lo.s32 	%r8, %r1, %r5, %r3;
	add.s32 	%r9, %r8, %r7;
	mad.lo.s32 	%r10, %r2, %r6, %r9;
	.loc 2 95 1
	add.s32 	%r11, %r10, 2;
	shl.b32 	%r12, %r1, 4;
	.loc 2 96 1
	add.s32 	%r13, %r12, %r2;
	add.s32 	%r14, %r13, 1;
	.loc 2 97 1
	add.s32 	%r15, %r7, 1;
	.loc 2 101 1
	cvt.s64.s32 	%rl2, %r15;
	cvta.to.global.u64 	%rl9, %rl5;
	.loc 2 101 1
	mul.wide.s32 	%rl10, %r15, 4;
	add.s64 	%rl11, %rl9, %rl10;
	add.s64 	%rl3, %rl11, -4;
	.loc 2 101 1
	ld.global.f32 	%f1, [%rl11];
	cvt.f64.f32 	%fd1, %f1;
	mul.f64 	%fd2, %fd1, 0d3FD3333333333333;
	cvta.to.global.u64 	%rl12, %rl6;
	.loc 2 101 1
	mul.wide.s32 	%rl13, %r14, 4;
	add.s64 	%rl14, %rl12, %rl13;
	ld.global.f32 	%f2, [%rl14];
	cvt.f64.f32 	%fd3, %f2;
	mul.f64 	%fd4, %fd2, %fd3;
	cvta.to.global.u64 	%rl4, %rl8;
	.loc 2 101 1
	mul.wide.s32 	%rl15, %r11, 4;
	add.s64 	%rl16, %rl4, %rl15;
	ld.global.f32 	%f3, [%rl16];
	cvt.f64.f32 	%fd5, %f3;
	fma.rn.f64 	%fd6, %fd5, 0d3FD3333333333333, %fd4;
	add.s64 	%rl17, %rl1, %rl15;
	ld.global.f32 	%f4, [%rl17];
	cvt.f64.f32 	%fd7, %f4;
	add.f64 	%fd8, %fd7, %fd6;
	cvt.rn.f32.f64 	%f5, %fd8;
	st.global.f32 	[%rl17], %f5;
	.loc 2 102 1
	ld.global.f32 	%f6, [%rl11];
	cvt.f64.f32 	%fd9, %f6;
	mul.f64 	%fd10, %fd9, 0d3FD3333333333333;
	ld.global.f32 	%f7, [%rl14];
	cvt.f64.f32 	%fd11, %f7;
	mul.f64 	%fd12, %fd10, %fd11;
	ld.global.f32 	%f8, [%rl16];
	cvt.f64.f32 	%fd13, %f8;
	fma.rn.f64 	%fd14, %fd13, 0d3FD3333333333333, %fd12;
	cvt.rn.f32.f64 	%f9, %fd14;
	st.global.f32 	[%rl16], %f9;
	.loc 2 105 1
	bar.sync 	0;
	.loc 2 90 1
	mov.u32 	%r35, %ctaid.y;
	.loc 2 93 1
	mov.u32 	%r36, %tid.y;
	or.b32  	%r25, %r36, %r35;
	setp.eq.s32 	%p1, %r25, 0;
	.loc 2 107 1
	@%p1 bra 	BB1_2;

	.loc 2 113 2
	ret;

BB1_2:
	.loc 2 108 1
	shl.b64 	%rl18, %rl2, 2;
	add.s64 	%rl19, %rl4, %rl18;
	ld.global.f32 	%f10, [%rl19];
	cvt.f64.f32 	%fd15, %f10;
	mul.f64 	%fd16, %fd15, 0d3FD3333333333333;
	ld.global.f32 	%f11, [%rl3+4];
	cvt.f64.f32 	%fd17, %f11;
	fma.rn.f64 	%fd18, %fd17, 0d3FD3333333333333, %fd16;
	add.s64 	%rl20, %rl1, %rl18;
	ld.global.f32 	%f12, [%rl20];
	cvt.f64.f32 	%fd19, %f12;
	add.f64 	%fd20, %fd19, %fd18;
	cvt.rn.f32.f64 	%f13, %fd20;
	st.global.f32 	[%rl20], %f13;
	.loc 2 109 1
	ld.global.f32 	%f14, [%rl19];
	cvt.f64.f32 	%fd21, %f14;
	mul.f64 	%fd22, %fd21, 0d3FD3333333333333;
	ld.global.f32 	%f15, [%rl3+4];
	cvt.f64.f32 	%fd23, %f15;
	fma.rn.f64 	%fd24, %fd23, 0d3FD3333333333333, %fd22;
	cvt.rn.f32.f64 	%f16, %fd24;
	st.global.f32 	[%rl19], %f16;
	.loc 2 113 2
	ret;
}


