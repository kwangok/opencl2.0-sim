# 1 "cell.cu"
# 1017 "/home/bachelor/deicide218/cuda-4.2/include/driver_types.h"
struct CUstream_st;
# 206 "/usr/include/libio.h" 3
enum __codecvt_result {

__codecvt_ok,
__codecvt_partial,
__codecvt_error,
__codecvt_noconv};
# 271 "/usr/include/libio.h" 3
struct _IO_FILE;
# 203 "/usr/include/math.h" 3
enum _ZUt_ {
FP_NAN,

FP_INFINITE,

FP_ZERO,

FP_SUBNORMAL,

FP_NORMAL};
# 296 "/usr/include/math.h" 3
enum _LIB_VERSION_TYPE {
_IEEE_ = (-1),
_SVID_,
_XOPEN_,
_POSIX_,
_ISOC_};
# 59 "/usr/include/c++/4.4/exception" 3
struct _ZSt9exception;
# 54 "/usr/include/c++/4.4/new" 3
struct _ZSt9bad_alloc;
# 124 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_voidIvEUt_E { _ZNSt9__is_voidIvE7__valueE = 1};
# 144 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIbEUt_E { _ZNSt12__is_integerIbE7__valueE = 1};
# 151 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIcEUt_E { _ZNSt12__is_integerIcE7__valueE = 1};
# 158 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIaEUt_E { _ZNSt12__is_integerIaE7__valueE = 1};
# 165 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIhEUt_E { _ZNSt12__is_integerIhE7__valueE = 1};
# 173 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIwEUt_E { _ZNSt12__is_integerIwE7__valueE = 1};
# 197 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIsEUt_E { _ZNSt12__is_integerIsE7__valueE = 1};
# 204 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerItEUt_E { _ZNSt12__is_integerItE7__valueE = 1};
# 211 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIiEUt_E { _ZNSt12__is_integerIiE7__valueE = 1};
# 218 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIjEUt_E { _ZNSt12__is_integerIjE7__valueE = 1};
# 225 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIlEUt_E { _ZNSt12__is_integerIlE7__valueE = 1};
# 232 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerImEUt_E { _ZNSt12__is_integerImE7__valueE = 1};
# 239 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIxEUt_E { _ZNSt12__is_integerIxE7__valueE = 1};
# 246 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIyEUt_E { _ZNSt12__is_integerIyE7__valueE = 1};
# 264 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIfEUt_E { _ZNSt13__is_floatingIfE7__valueE = 1};
# 271 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIdEUt_E { _ZNSt13__is_floatingIdE7__valueE = 1};
# 278 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIeEUt_E { _ZNSt13__is_floatingIeE7__valueE = 1};
# 354 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_charIcEUt_E { _ZNSt9__is_charIcE7__valueE = 1};
# 362 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_charIwEUt_E { _ZNSt9__is_charIwE7__valueE = 1};
# 377 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIcEUt_E { _ZNSt9__is_byteIcE7__valueE = 1};
# 384 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIaEUt_E { _ZNSt9__is_byteIaE7__valueE = 1};
# 391 "/usr/include/c++/4.4/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIhEUt_E { _ZNSt9__is_byteIhE7__valueE = 1};
# 64 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
union _ZZ10__signbitlEUt_;
# 211 "/usr/lib/gcc/x86_64-linux-gnu/4.4.7/include/stddef.h" 3
typedef unsigned long size_t;
#include "crt/host_runtime.h"
# 49 "/usr/include/stdio.h" 3
typedef struct _IO_FILE FILE;
# 56 "/usr/include/stdint.h" 3
typedef unsigned long uint64_t;
# 59 "/usr/include/c++/4.4/exception" 3
struct _ZSt9exception { const long *__vptr;};
# 54 "/usr/include/c++/4.4/new" 3
struct _ZSt9bad_alloc { struct _ZSt9exception __b_St9exception;};
# 64 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
union _ZZ10__signbitlEUt_ { long double __l; int __i[3];};
void *memcpy(void*, const void*, size_t); void *memset(void*, int, size_t);
# 139 "/home/bachelor/deicide218/cuda-4.2/include/common_functions.h"
extern __attribute__((visibility("default"))) void *_Znam(size_t);

extern __attribute__((visibility("default"))) void _ZdaPv(void *);
# 1043 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaGetDeviceCount(int *);
# 1298 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaSetDevice(int);
# 1786 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaConfigureCall(dim3, dim3, size_t, cudaStream_t);
# 2055 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaMalloc(void **, size_t);
# 2189 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaFree(void *);
# 2870 "/home/bachelor/deicide218/cuda-4.2/include/cuda_runtime_api.h"
extern cudaError_t cudaMemcpy(void *, const void *, size_t, enum cudaMemcpyKind);
# 102 "/home/bachelor/deicide218/cuda-4.2/include/common_functions.h"
extern int fprintf(FILE *__restrict__, const char *__restrict__, ...);
# 101 "/home/bachelor/deicide218/cuda-4.2/include/common_functions.h"
extern int printf(const char *__restrict__, ...);
# 184 "/usr/include/stdlib.h" 3
extern long strtol(const char *__restrict__, char **__restrict__, int);
# 380 "/usr/include/stdlib.h" 3
extern int rand(void);

extern void srand(unsigned);
# 544 "/usr/include/stdlib.h" 3
extern __attribute__((__noreturn__)) void exit(int);
# 38 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
extern  __attribute__((__weak__)) /* COMDAT group: __signbitf */ __inline__ __attribute__((__const__)) int __signbitf(float);
# 50 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
extern  __attribute__((__weak__)) /* COMDAT group: __signbit */ __inline__ __attribute__((__const__)) int __signbit(double);
# 62 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
extern  __attribute__((__weak__)) /* COMDAT group: __signbitl */ __inline__ __attribute__((__const__)) int __signbitl(long double);
# 16 "cell.cu"
extern void m5_work_begin(uint64_t, uint64_t);
extern void m5_work_end(uint64_t, uint64_t);
# 36 "cell.cu"
extern void _Z4initiPPc(int, char **);
# 65 "cell.cu"
extern void _Z5fatalPc(char *);
# 188 "cell.cu"
extern int _Z8simulatePPiiiiiiiiii(int **, int, int, int, int, int, int, int, int, int);
# 214 "cell.cu"
extern int main(int, char **);
# 231 "cell.cu"
extern void _Z3runiPPc(int, char **);
extern int __cudaSetupArgSimple();
extern int __cudaLaunch();
extern int __cudaRegisterBinary();
extern int __cudaRegisterEntry();
static void __sti___12_cell_cpp1_ii_bornMin(void) __attribute__((__constructor__));
# 167 "/usr/include/stdio.h" 3
extern struct _IO_FILE *stderr;
# 24 "cell.cu"
int J = 0;
# 24 "cell.cu"
int K = 0;
# 24 "cell.cu"
int L = 0;
int *data = 0;
int **space2D = 0;
int ***space3D = 0;

int pyramid_height = 0;
int timesteps = 0;

extern int bornMin;
# 32 "cell.cu"
extern int bornMax;
extern int dieMax;
# 33 "cell.cu"
extern int dieMin;
extern  __attribute__((__weak__)) /* COMDAT group: _ZTSSt9exception */ const char _ZTSSt9exception[13] __attribute__((visibility("default")));
extern  __attribute__((__weak__)) /* COMDAT group: _ZTSSt9bad_alloc */ const char _ZTSSt9bad_alloc[13] __attribute__((visibility("default")));
# 32 "cell.cu"
int bornMin = 5;
# 32 "cell.cu"
int bornMax = 8;
int dieMax = 3;
# 33 "cell.cu"
int dieMin = 10;
 __attribute__((__weak__)) /* COMDAT group: _ZTSSt9exception */ const char _ZTSSt9exception[13] __attribute__((visibility("default"))) = "St9exception";
 __attribute__((__weak__)) /* COMDAT group: _ZTSSt9bad_alloc */ const char _ZTSSt9bad_alloc[13] __attribute__((visibility("default"))) = "St9bad_alloc";
# 38 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
 __attribute__((__weak__)) /* COMDAT group: __signbitf */ __inline__ __attribute__((__const__)) int __signbitf( float __x)
{




 int __cuda_local_var_6664_7_non_const___m;
__asm("pmovmskb %1, %0" : "=r" (__cuda_local_var_6664_7_non_const___m) : "x" (__x));
return __cuda_local_var_6664_7_non_const___m & 8;

}

 __attribute__((__weak__)) /* COMDAT group: __signbit */ __inline__ __attribute__((__const__)) int __signbit( double __x)
{




 int __cuda_local_var_6676_7_non_const___m;
__asm("pmovmskb %1, %0" : "=r" (__cuda_local_var_6676_7_non_const___m) : "x" (__x));
return __cuda_local_var_6676_7_non_const___m & 128;

}

 __attribute__((__weak__)) /* COMDAT group: __signbitl */ __inline__ __attribute__((__const__)) int __signbitl( long double __x)
{
 union _ZZ10__signbitlEUt_ __cuda_local_var_6684_56_non_const___u;
# 64 "/usr/include/x86_64-linux-gnu/bits/mathinline.h" 3
(__cuda_local_var_6684_56_non_const___u.__l) = __x;
return (int)(((((__cuda_local_var_6684_56_non_const___u.__i))[2]) & 32768) != 0);
}
# 36 "cell.cu"
void _Z4initiPPc( int argc,  char **argv)
{  const char *__T20;
 const char *__T21;
 const char *__T22;
 const char *__T23;
 const char *__T24;
# 56 "cell.cu"
 int __cuda_local_var_16397_6_non_const_seed;
# 38 "cell.cu"
if (argc == 6) {
J = ((__T20 = ((const char *)(argv[1]))) , ((int)(strtol(__T20, ((char **)0LL), 10))));
K = ((__T21 = ((const char *)(argv[2]))) , ((int)(strtol(__T21, ((char **)0LL), 10))));
L = ((__T22 = ((const char *)(argv[3]))) , ((int)(strtol(__T22, ((char **)0LL), 10))));
timesteps = ((__T23 = ((const char *)(argv[4]))) , ((int)(strtol(__T23, ((char **)0LL), 10))));
pyramid_height = ((__T24 = ((const char *)(argv[5]))) , ((int)(strtol(__T24, ((char **)0LL), 10))));
} else  {
printf(((const char *)"Usage: cell dim3 dim2 dim1 timesteps pyramid_height\n"));
exit(0);
}
data = ((int *)(_Znam((((unsigned long)((J * K) * L)) * 4UL))));
space2D = ((int **)(_Znam((((unsigned long)(J * K)) * 8UL))));
space3D = ((int ***)(_Znam((((unsigned long)J) * 8UL)))); {
 int n;
# 51 "cell.cu"
n = 0; for (; (n < (J * K)); n++) {
(space2D[n]) = (data + (L * n)); } } {
 int n;
# 53 "cell.cu"
n = 0; for (; (n < J); n++) {
(space3D[n]) = (space2D + (K * n)); } }

__cuda_local_var_16397_6_non_const_seed = 9;
srand(((unsigned)__cuda_local_var_16397_6_non_const_seed)); {

 int i;
# 59 "cell.cu"
i = 0; for (; (i < ((J * K) * L)); i++) {
(data[i]) = ((rand()) % 2); } } 

}


void _Z5fatalPc( char *s)
{
fprintf(stderr, ((const char *)"error: %s\n"), s); 
}
# 188 "cell.cu"
int _Z8simulatePPiiiiiiiiii( int **gpuData, 
int J,  int K,  int L, 
int timesteps, 
int pyramid_height, 
int blockJ,  int blockK,  int blockL, 
int border)
{  unsigned __T25;
 unsigned __T26;
# 195 "cell.cu"
 dim3 __cuda_local_var_16536_14_non_const_dimBlock;

 dim3 __cuda_local_var_16538_14_non_const_dimGrid;

 int __cuda_local_var_16540_13_non_const_src;
# 199 "cell.cu"
 int __cuda_local_var_16540_22_non_const_dst;
# 195 "cell.cu"
{ (__cuda_local_var_16536_14_non_const_dimBlock.x) = 8U; (__cuda_local_var_16536_14_non_const_dimBlock.y) = 8U; (__cuda_local_var_16536_14_non_const_dimBlock.z) = 8U; }

{ __T25 = ((unsigned)blockJ); __T26 = ((unsigned)(blockK * blockL)); { (__cuda_local_var_16538_14_non_const_dimGrid.x) = __T25; (__cuda_local_var_16538_14_non_const_dimGrid.y) = __T26; (__cuda_local_var_16538_14_non_const_dimGrid.z) = 1U; } }

__cuda_local_var_16540_13_non_const_src = 1; __cuda_local_var_16540_22_non_const_dst = 0; {
 int t;
# 200 "cell.cu"
t = 0; for (; (t < timesteps); t += pyramid_height) {
 int __cuda_local_var_16542_17_non_const_temp;
# 201 "cell.cu"
__cuda_local_var_16542_17_non_const_temp = __cuda_local_var_16540_13_non_const_src;
__cuda_local_var_16540_13_non_const_src = __cuda_local_var_16540_22_non_const_dst;
__cuda_local_var_16540_22_non_const_dst = __cuda_local_var_16542_17_non_const_temp;
(cudaConfigureCall(__cuda_local_var_16538_14_non_const_dimGrid, __cuda_local_var_16536_14_non_const_dimBlock, 0UL, ((cudaStream_t)0LL))) ? ((void)0) : (__device_stub__Z6evolveiPiS_iiiiiiiii(((pyramid_height <= (timesteps - t)) ? pyramid_height : (timesteps - t)), (gpuData[__cuda_local_var_16540_13_non_const_src]), (gpuData[__cuda_local_var_16540_22_non_const_dst]), J, K, L, bornMin, bornMax, dieMin, dieMax, blockL, border));
# 210 "cell.cu"
} }
return __cuda_local_var_16540_22_non_const_dst;
}

int main( int argc,  char **argv)
{
 int __cuda_local_var_16557_9_non_const_num_devices;
cudaGetDeviceCount((&__cuda_local_var_16557_9_non_const_num_devices));
if (__cuda_local_var_16557_9_non_const_num_devices > 1) { cudaSetDevice(1); }

_Z4initiPPc(argc, argv);

_Z3runiPPc(argc, argv);

_ZdaPv(((void *)data));
_ZdaPv(((void *)space2D));
_ZdaPv(((void *)space3D));

return 0;
}

void _Z3runiPPc( int argc,  char **argv)
{



 int __cuda_local_var_16577_9_non_const_border;
 int __cuda_local_var_16578_9_non_const_smallBlockEdge;
 int __cuda_local_var_16579_9_non_const_blockJ;
 int __cuda_local_var_16580_9_non_const_blockK;
 int __cuda_local_var_16581_9_non_const_blockL;
# 249 "cell.cu"
 int *__cuda_local_var_16590_10_non_const_gpuData[2];
 int __cuda_local_var_16591_9_non_const_size;





 int __cuda_local_var_16597_9_non_const_ret;
# 233 "cell.cu"
_Z4initiPPc(argc, argv);


__cuda_local_var_16577_9_non_const_border = ((pyramid_height * 2) / 2);
__cuda_local_var_16578_9_non_const_smallBlockEdge = (8 - (pyramid_height * 2));
__cuda_local_var_16579_9_non_const_blockJ = ((J / __cuda_local_var_16578_9_non_const_smallBlockEdge) + (((J % __cuda_local_var_16578_9_non_const_smallBlockEdge) == 0) ? 0 : 1));
__cuda_local_var_16580_9_non_const_blockK = ((K / __cuda_local_var_16578_9_non_const_smallBlockEdge) + (((K % __cuda_local_var_16578_9_non_const_smallBlockEdge) == 0) ? 0 : 1));
__cuda_local_var_16581_9_non_const_blockL = ((L / __cuda_local_var_16578_9_non_const_smallBlockEdge) + (((L % __cuda_local_var_16578_9_non_const_smallBlockEdge) == 0) ? 0 : 1));

printf(((const char *)"pyramidHeight: %d\ngridSize: [%d, %d, %d]\nborder:[%d]\nblockSize: %d\nblockGrid:[%d, %d, %d]\ntargetBlock:[%d]\n"), pyramid_height, J, K, L, __cuda_local_var_16577_9_non_const_border, 8, __cuda_local_var_16579_9_non_const_blockJ, __cuda_local_var_16580_9_non_const_blockK, __cuda_local_var_16581_9_non_const_blockL, __cuda_local_var_16578_9_non_const_smallBlockEdge);



m5_work_begin(0UL, 0UL);



__cuda_local_var_16591_9_non_const_size = ((J * K) * L);
cudaMalloc(((void **)((__cuda_local_var_16590_10_non_const_gpuData) + 0)), (4UL * ((unsigned long)__cuda_local_var_16591_9_non_const_size)));
cudaMalloc(((void **)((__cuda_local_var_16590_10_non_const_gpuData) + 1)), (4UL * ((unsigned long)__cuda_local_var_16591_9_non_const_size)));
cudaMemcpy(((void *)((__cuda_local_var_16590_10_non_const_gpuData)[0])), ((const void *)data), (4UL * ((unsigned long)__cuda_local_var_16591_9_non_const_size)), cudaMemcpyHostToDevice);


__cuda_local_var_16597_9_non_const_ret = (_Z8simulatePPiiiiiiiiii((__cuda_local_var_16590_10_non_const_gpuData), J, K, L, timesteps, pyramid_height, __cuda_local_var_16579_9_non_const_blockJ, __cuda_local_var_16580_9_non_const_blockK, __cuda_local_var_16581_9_non_const_blockL, __cuda_local_var_16577_9_non_const_border));



cudaMemcpy(((void *)data), ((const void *)((__cuda_local_var_16590_10_non_const_gpuData)[__cuda_local_var_16597_9_non_const_ret])), (4UL * ((unsigned long)__cuda_local_var_16591_9_non_const_size)), cudaMemcpyDeviceToHost);

m5_work_end(0UL, 0UL);


printf(((const char *)"Final world:\n")); {
 int i;
# 266 "cell.cu"
i = 0; for (; ((i < J) && (i < 2)); i++) { {
 int j;
# 267 "cell.cu"
j = 0; for (; ((j < K) && (j < 4)); j++) { {
 int k;
# 268 "cell.cu"
k = 0; for (; ((k < L) && (k < 8)); k++) {
printf(((const char *)"%d "), (data[((k + (j * L)) + (i * (L * K)))]));
} }
printf(((const char *)"\n"));
} }
printf(((const char *)"\n"));
} }

cudaFree(((void *)((__cuda_local_var_16590_10_non_const_gpuData)[0])));
cudaFree(((void *)((__cuda_local_var_16590_10_non_const_gpuData)[1]))); 
}
static void __sti___12_cell_cpp1_ii_bornMin(void) {   }

#include "cell.cudafe1.stub.c"
